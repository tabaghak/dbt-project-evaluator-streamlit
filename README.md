# dbt Project Evaluator Results Dashboard

A Streamlit web application for visualizing the results of the [dbt Project Evaluator](https://github.com/dbt-labs/dbt-project-evaluator) package. This is a post-execution reporting tool that provides interactive dashboards and detailed insights into your dbt project's health, violations, and compliance with best practices.

## Prerequisites

**Important**: This application is designed to visualize results **after** you have:
1. ‚úÖ Installed and configured the [dbt Project Evaluator package](https://github.com/dbt-labs/dbt-project-evaluator) in your dbt project
2. ‚úÖ Successfully executed `dbt run` to generate the evaluation results tables
3. ‚úÖ Ensured the results are available in your data warehouse (Snowflake)

The app expects to find the dbt Project Evaluator results tables in your configured database and schema.

## Installation

1. **Clone the repository**:
   ```bash
   git clone https://github.com/tabaghak/dbt-project-evalator-streamlit.git
   cd dbt-project-evalator-streamlit
   ```

2. **Create and activate virtual environment**:
   ```bash
   python -m venv .venv
   .venv\Scripts\activate  # On Windows
   # source .venv/bin/activate  # On macOS/Linux
   ```

3. **Install dependencies**:
   ```bash
   pip install -r requirements.txt
   ```

4. **Generate rules data** (if not already done):
   ```bash
   python rule_extractor.py
   ```

5. **Configure Snowflake Connection**:
   Create a `.streamlit/secrets.toml` file with your Snowflake connection details:
   ```toml
   [connections.snowflake]
   account = "your-account-name"
   user = "your.email@company.com"
   authenticator = "externalbrowser"  # or "password", "key-pair", etc.
   role = "YOUR_ROLE"
   warehouse = "YOUR_WAREHOUSE"
   database = "DBT_SOURCE_PROJECT_EVAL"    # Important: Where dbt_project_evaluator results are stored
   schema = "RESULTS"                      # Important: Schema containing the evaluation tables
   ```
   
   **Note**: The `database` and `schema` values are critical - they must point to where your dbt Project Evaluator results are stored. Common table names the app looks for:
   - `FCT_DOCUMENTATION_COVERAGE`
   - `FCT_TEST_COVERAGE` 
   - `INT_ALL_GRAPH_RESOURCES`
   - Individual rule violation tables (e.g., `FCT_DIRECT_JOIN_TO_SOURCE`)

## Usage

1. **Start the application**:
   ```bash
   streamlit run app.py
   ```

2. **Connect to Snowflake**:
   - **Automatic**: If `secrets.toml` is configured, click "Connect using secrets.toml"
   - **Manual**: Use the sidebar to enter credentials with your preferred authentication method
   - **Important**: Connection is required to load dbt Project Evaluator results from your data warehouse

3. **Open your browser** and navigate to `http://localhost:8502`

4. **Explore the Dashboard**:
   - **Overview Dashboard**: Project health metrics, coverage statistics, and violation summaries
   - **Rule Categories**: Detailed views of violations by category (Modeling, Testing, Structure, etc.)
   - **Rule Details**: Individual rule explanations with violation data from your project

## What This App Shows

The dashboard provides visualizations and insights for:

- **üìä Project Health Overview**: Real-time metrics from your dbt project evaluation
- **üìà Coverage Analytics**: Documentation and test coverage with trend analysis  
- **üîç Violation Details**: Specific models and issues identified by each rule
- **üìã Rule Guidance**: Explanations, examples, and remediation steps for each dbt best practice

All data is pulled directly from the dbt Project Evaluator results in your data warehouse.

## Data Structure

### **Rules JSON File**

The `dbt_project_evaluator_rules.json` file contains comprehensive information about all dbt Project Evaluator rules and is used by the app to provide user guidance and explanations. This file was automatically generated by extracting data from the official [dbt Project Evaluator documentation](https://github.com/dbt-labs/dbt-project-evaluator/tree/main/docs/rules).

**Generation Process**:
- The `rule_extractor.py` script parses the rule documentation from the official GitHub repository
- Extracts rule details including descriptions, examples, exceptions, and remediation steps
- Organizes rules into logical categories (Modeling, Testing, Structure, Documentation, Governance, Performance)
- Outputs a structured JSON file for use by the Streamlit dashboard

**JSON Structure**:
```json
{
  "CategoryName": {
    "rules": {
      "rule_id": {
        "name": "Rule Name",
        "description": "Rule description",
        "example": "Example content",
        "exception": "Exception details",
        "reason_to_flag": "Why this should be flagged",
        "remediation": "How to fix the issue"
      }
    }
  }
}
```

**Usage in the App**:
- Provides detailed rule explanations in the dashboard
- Offers guidance on how to fix violations
- Supplies examples and context for each best practice
- Enables categorized navigation and filtering

## File Structure

```
dbt-project-evalator-streamlit/
‚îú‚îÄ‚îÄ app.py                              # Main Streamlit application
‚îú‚îÄ‚îÄ rule_extractor.py                   # Rule data generator
‚îú‚îÄ‚îÄ dbt_project_evaluator_rules.json    # Generated rules data
‚îú‚îÄ‚îÄ README.md                           # This file
‚îú‚îÄ‚îÄ requirements.txt                    # Python dependencies (if created)
‚îî‚îÄ‚îÄ .venv/                             # Virtual environment
```

## Key Features Explained

### **Category Management**
- Rules are organized into logical categories:
  - **Modeling**: DAG structure and modeling best practices
  - **Testing**: Data quality and testing requirements
  - **Structure**: Project organization and naming conventions
  - **Documentation**: Documentation coverage and quality
  - **Governance**: Access control and data governance
  - **Performance**: Query performance and optimization

## Troubleshooting

### **Common Issues**

1. **Module not found errors**:
   ```bash
   pip install -r requirements.txt
   ```

2. **JSON file not found**:
   ```bash
   python rule_extractor.py
   ```

3. **Port already in use**:
   ```bash
   streamlit run app.py --server.port 8503
   ```

4. **Cache issues**:
   - Restart the application
   - Clear browser cache

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test thoroughly
5. Submit a pull request

## License

This project is licensed under the terms specified in the LICENSE file.

## Support

For issues and questions:
1. Check the troubleshooting section
2. Review the application logs
3. Create an issue in the repository
4. Check Streamlit documentation for UI-related issues

---

**Built with ‚ù§Ô∏è using Streamlit and Python**
This streamlit app visualizes the results of dbt_project_evaluator package plugged in a dbt project.
